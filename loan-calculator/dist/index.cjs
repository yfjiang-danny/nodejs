"use strict";var u=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var f=(s,t)=>{for(var e in t)u(s,e,{get:t[e],enumerable:!0})},v=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of d(t))!y.call(s,a)&&a!==e&&u(s,a,{get:()=>t[a],enumerable:!(i=p(t,a))||i.enumerable});return s};var b=s=>v(u({},"__esModule",{value:!0}),s);var L={};f(L,{default:()=>g});module.exports=b(L);Number.prototype.format=function(s){if(typeof s!="number"&&s<0)throw new Error("Params must be a positive integer");let t=Math.floor(s),e=Math.pow(10,t);return Math.round(this.valueOf()*e)/e};var m=class{constructor(){this.total=0;this.yRate=0;this.year=0;this.mRate=0;this.type=1;this.monthlyPay=0;this.detail=[];this.detailMap=new Map;this.digits=0}init(t=0,e=.037,i=30,a=1,r=0){if(t>Number.MAX_VALUE)throw new Error("");this.total=t,this.yRate=e,this.mRate=e/12,this.year=i,this.type=a,this.digits=r,this.calculate()}calculateInType1(){var t=this.total,e=this.year,i=this.mRate,a=this.monthlyPay,r=this.digits,l=[],n=0;for(let o=0;o<e*12;o++){var h=(t*i).format(r);n+=h,t-=a-h,l[o]=[a,t,n]}return l}calculateInType2(){var t=this.total,e=this.year,i=this.mRate,a=this.digits,r=(t/(e*12)).format(a),l=[],n=0;for(let c=0;c<e*12;c++){var h=(t*i).format(a);n+=h;var o=r+h;t-=r,l[c]=[o,t,n]}return l}calculate(){let t=this.total,e=this.type,i=this.year,a=this.digits;var r=this.mRate;this.monthlyPay=(t*r*Math.pow(1+r,i*12)/(Math.pow(1+r,i*12)-1)).format(a);let l=this.calculateInType1(),n=this.calculateInType2();this.detailMap.set(1,l),this.detailMap.set(2,n),e==1?this.detail=l:e==2&&(this.detail=n)}setType(t){this.type=t,this.detail=this.detailMap.get(t)}setTotal(t){this.total=t,this.calculate()}setYRate(t){this.yRate=t,this.mRate=t/12,this.calculate()}setYear(t){this.year=t,this.calculate()}checkInitial(){if(!this.detail)throw new Error("LoanCalculator is not initial yet.Please call LoanCalculator.init to init")}getInterest(t){if(this.checkInitial(),this.detail&&this.detail.length>0){var e=typeof t=="number"?t-1:this.detail.length-1,i=this.detail[e];return i?i[2]:0}return 0}getMonthlyPay(t){if(this.checkInitial(),this.detail&&this.detail.length>0){var e=t-1,i=this.detail[e];return i?i[0]:0}return 0}getDetail(){return this.checkInitial(),this.detail}getLoan(t){this.checkInitial();var e=this.detail[t-1];return e?e[1]:0}toString(){this.checkInitial();var t=this.detail,e=this.digits,i="";for(let a=0;a<t.length;a++){let r=t[a];i+="["+r[0].format(e)+","+r[1].format(e)+"]"}return i}},g=m;
