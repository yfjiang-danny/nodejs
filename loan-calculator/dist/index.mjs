Number.prototype.format=function(o){if(typeof o!="number"&&o<0)throw new Error("Params must be a positive integer");let t=Math.floor(o),e=Math.pow(10,t);return Math.round(this.valueOf()*e)/e};var u=class{constructor(){this.total=0;this.yRate=0;this.year=0;this.mRate=0;this.type=1;this.monthlyPay=0;this.detail=[];this.detailMap=new Map;this.digits=0}init(t=0,e=.037,i=30,a=1,r=0){if(t>Number.MAX_VALUE)throw new Error("");this.total=t,this.yRate=e,this.mRate=e/12,this.year=i,this.type=a,this.digits=r,this.calculate()}calculateInType1(){var t=this.total,e=this.year,i=this.mRate,a=this.monthlyPay,r=this.digits,s=[],l=0;for(let h=0;h<e*12;h++){var n=(t*i).format(r);l+=n,t-=a-n,s[h]=[a,t,l]}return s}calculateInType2(){var t=this.total,e=this.year,i=this.mRate,a=this.digits,r=(t/(e*12)).format(a),s=[],l=0;for(let c=0;c<e*12;c++){var n=(t*i).format(a);l+=n;var h=r+n;t-=r,s[c]=[h,t,l]}return s}calculate(){let t=this.total,e=this.type,i=this.year,a=this.digits;var r=this.mRate;this.monthlyPay=(t*r*Math.pow(1+r,i*12)/(Math.pow(1+r,i*12)-1)).format(a);let s=this.calculateInType1(),l=this.calculateInType2();this.detailMap.set(1,s),this.detailMap.set(2,l),e==1?this.detail=s:e==2&&(this.detail=l)}setType(t){this.type=t,this.detail=this.detailMap.get(t)}setTotal(t){this.total=t,this.calculate()}setYRate(t){this.yRate=t,this.mRate=t/12,this.calculate()}setYear(t){this.year=t,this.calculate()}checkInitial(){if(!this.detail)throw new Error("LoanCalculator is not initial yet.Please call LoanCalculator.init to init")}getInterest(t){if(this.checkInitial(),this.detail&&this.detail.length>0){var e=typeof t=="number"?t-1:this.detail.length-1,i=this.detail[e];return i?i[2]:0}return 0}getMonthlyPay(t){if(this.checkInitial(),this.detail&&this.detail.length>0){var e=t-1,i=this.detail[e];return i?i[0]:0}return 0}getDetail(){return this.checkInitial(),this.detail}getLoan(t){this.checkInitial();var e=this.detail[t-1];return e?e[1]:0}toString(){this.checkInitial();var t=this.detail,e=this.digits,i="";for(let a=0;a<t.length;a++){let r=t[a];i+="["+r[0].format(e)+","+r[1].format(e)+"]"}return i}},m=u;export{m as default};
